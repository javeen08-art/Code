<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> 
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>3D Mushrooms</title>
    <link rel="stylesheet" href="mush.css">
    <link rel="icon" href="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG" type="image/png">
  </head>
  <body>
    <main> 
      <article>
        <div class="smallmnu">
          <div class="smallh">
            <a href="index.html" id="myBtn">
              <img src="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG" type="image/png" width="50">
            </a>
          </div>
          <div class="smallm">
            <button class="st2"><span>≡</span></button>
            <div class="s6">
              <a href='index.html'>Home</a>
              <a href='about.html'>About Us</a>
              <a href='serv.html'>Services</a>
              <a href="work.html">Ma'Showroom</a>
              <a href='quote.html'>Get A Quote</a>
              <a href='faq.html' style="padding-bottom: 7px;">FAQ</a>
            </div>
          </div>
        </div>
      </article>

      <article>
        <div class="trans">
          <p><img src="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG"></p>
        </div>

        <div class="contacts">
          <div class="forms">
            <div class="home3">
              <a href='index.html' id="myBtn">
                <img src="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG" alt="logo" width="150">
              </a> 
            </div>

            <div class="nextbtnt2">
              <button class="starts2">≡</button>
              <div class='s4'>
                <a href='index.html'>Home</a>
                <a href='about.html'>About Us</a>
                <a href='serv.html'>Services</a>
                <a href='faq.html' style="padding-bottom: 7px;">FAQ</a>
              </div>
            </div>

            <!-- Updated Form -->
            <form id="quoteForm" class="forms" enctype="multipart/form-data">
              <h7>Quote</h7>
              <div class="words">
                <div class="three">
                  <div><input type="text" id="name" name="Name" placeholder="Name Here" style="scroll-margin-top: 150px;"></div>
                  <div><input type="tel" id="phone" name="phone" placeholder="647000000" pattern="[0-9]{3}[0-9]{3}[0-9]{3}"></div>
                  <div><input type="email" id='email' name='email' placeholder="E-mail"></div>
                  <div><input id="subject" name="City/Address" placeholder="City/Address"></div>
                </div>

                <div class="messagess">
                  <input id="subject" name="subject" placeholder="Type Of Surface">
                  <input id="subject" name="Size in ft" placeholder="Size in ft" style="margin-top: 1vh;">
                </div>
              </div>

              <div class="designer">
                <label>Do you have your own design?</label>
                <div class="bo">
                  <div class="option">
                    <label><input type="radio" name="Got design?" value="yea"> Yes</label>
                  </div>
                  <div class="option">
                    <label><input type="radio" name="Got design?" value="nah"> No</label>
                  </div>
                </div>
              </div>

              <div class="l2">
                <div class="date">
                  <label for="bdate">Choose Your Date</label>
                  <input type="date" id="bdate" name="Date Perferred" min="" max="">
                </div>
                <div class="dropdown">
                  <label>Location Of Print:</label>
                  <select name="area">
                    <option value="House">House</option>
                    <option value="Apartment/Condo">Apartment/Condo</option>
                    <option value="Offices">Offices</option>
                    <option value="Warehouse/Commercials">Warehouse/Commercials</option>
                    <option value="School">School</option>
                    <option value="Hospital">Hospital</option>
                    <option value="Gym">Gym</option>
                    <option value="Recreation Centre">Recreation Centre</option>
                    <option value="Tow Trailers">Tow Trailers</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
              </div>

              <div class="file-upload">
                <label for="filename">Upload Your File:</label>
                <input type="file" id="filename" name="filename" accept="image/*" required>
              </div>

              <div class="buttons">
                <div><input type="reset" id="d"></div>
                <div><input type="submit" id="b" style="background-color: #3498DB; color:white;"></div>
                <div id='message'>Form has been submitted successfully</div>
                <div id="loading" style="display:none;">Processing...</div>
              </div>
            </form>

          </div> 
        </div>
      </article>
    </main>

    <script>
      // -------- Collapsible Buttons --------
      const collapsibleButtons = document.querySelectorAll('.collapsible, .starts, .starts2, .st2, .nextbtnt3');
      collapsibleButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          this.classList.toggle('active');
          if (this.classList.contains('active')) {
            this.textContent = this.textContent.replace('+', '−');
          } else {
            this.textContent = this.textContent.replace('−', '+');
          }
          const content = this.nextElementSibling;
          if (content) {
            if (content.style.maxHeight) content.style.maxHeight = null;
            else content.style.maxHeight = content.scrollHeight + "px";
          }
        });
      });

      document.addEventListener('click', () => {
        collapsibleButtons.forEach(btn => {
          if (btn.classList.contains('active')) {
            btn.classList.remove('active');
            if (btn.textContent.includes('−')) btn.textContent = btn.textContent.replace('−', '+');
            const content = btn.nextElementSibling;
            if (content) content.style.maxHeight = null;
          }
        });
      });

      // -------- Date input min attribute --------
      const today = new Date();
      const year = today.getFullYear();
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const day = String(today.getDate()).padStart(2, '0');
      const minDate = `${year}-${month}-${day}`;
      const bdateInput = document.getElementById('bdate');
      if (bdateInput) bdateInput.setAttribute('min', minDate);

      // -------- Form Submission with File Upload --------
      const form = document.getElementById('quoteForm');
      const messageDiv = document.getElementById('message');
      const loadingDiv = document.getElementById('loading');

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        loadingDiv.style.display = 'block';
        const formData = new FormData(form);
        fetch("https://script.google.com/macros/s/AKfycbz-SHTAL1zKkMBe-8rbXI87BvG-emcH41QxizCP-vQB6Rx1_ibfzvyaOZnZ_SZpKOfK/exec", {
          method: "POST",
          body: formData
        })
        .then(res => res.text())
        .then(data => {
          loadingDiv.style.display = 'none';
          alert('Form submitted successfully! Check your email for the uploaded image.');
          form.reset();
        })
        .catch(err => {
          loadingDiv.style.display = 'none';
          alert('Error submitting form: ' + err);
        });
      });

      // -------- Hide transition image after animation --------
      const transElement = document.querySelector('.trans');
      if(transElement){
        transElement.addEventListener('animationend', () => {
          transElement.style.display = 'none';
        });
      }
    </script>
  </body>
</html>
