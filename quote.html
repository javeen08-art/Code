<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>3D Mushrooms</title>
  <link rel="stylesheet" href="mush.css">
  <link rel="icon" href="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG" type="image/png">
</head>

<body>

<main>
<article>

  <div class="smallmnu">
    <div class="smallh">
      <a href="index.html" id="myBtn"><img src="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG" width="50"></a>
    </div>

    <div class="smallm">
      <button class="st2"><span>≡</span></button>
      <div class="s6">
        <a href="index.html">Home</a>
        <a href="about.html">About Us</a>
        <a href="serv.html">Services</a>
        <a href="work.html">Ma'Showroom</a>
        <a href="faq.html" style="padding-bottom: 7px;">FAQ</a>
      </div>
    </div>
  </div>

</article>

<article>

  <div class="trans">
    <p><img src="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG"></p>
  </div>

  <div class="contacts">
    <div class="forms">

      <div class="home3">
        <a href="index.html"><img src="MushImgs/719A6AB5-B07D-4B8D-B365-2F1CFEE85942.PNG" width="150"></a>
      </div>

      <div class="nextbtnt2">
        <button class="starts2">≡</button>
        <div class="s4">
          <a href="index.html">Home</a>
          <a href="about.html">About Us</a>
          <a href="serv.html">Services</a>
          <a href="faq.html" style="padding-bottom: 7px;">FAQ</a>
        </div>
      </div>

      <!-- ===================== FORM ===================== -->
      <form method="POST"
        action="https://script.google.com/macros/s/AKfycbyfQnd2yKT4zMKdbsqkUpGWd7x8Hek3ik9wIOsOMVyHAvxB5TWuVlSwKN0IbsgPyBNIug/exec">

        <div class="notice">
          <p>⚠️ Ensure all wall measurements are accurate. Keep artwork at least 35 cm below the ceiling and 60 cm above the floor.</p>
        </div>

        <h7>Quote</h7>

        <div class="words">
          <div class="three">
            <input type="text" name="Name" placeholder="Name Here">
            <input type="tel" name="phone" placeholder="647000000" pattern="[0-9]{3}[0-9]{3}[0-9]{3}">
            <input type="email" name="email" placeholder="E-mail">
            <input name="City/Address" placeholder="City/Address">
          </div>

          <div class="messagess">
            <input name="Surface Type" placeholder="Type Of Surface">
            <input name="Size in ft" placeholder="Size in ft" style="margin-top:1vh;">
          </div>
        </div>

        <div class="designer">
          <label>Do you have your own design?</label>
          <div class="bo">
            <label><input type="radio" name="Got design?" value="yes"> Yes</label>
            <label><input type="radio" name="Got design?" value="no"> No</label>
          </div>
        </div>

        <div class="l2">
          <div class="date">
            <label for="bdate">Choose Your Date</label>
            <input type="date" id="bdate" name="Date Preferred">
          </div>

          <div class="dropdown">
            <label>Location Of Print:</label>
            <select name="area" id="areaSelect">
              <option value="" disabled selected>Select an option...</option>
              <option value="Office">Offices</option>
              <option value="Garage">Garages</option>
              <option value="Warehouse/Commercials">Warehouse/Commercials</option>
              <option value="School">School</option>
              <option value="Hospital">Hospital</option>
              <option value="Gym">Gym</option>
              <option value="Recreation Centre">Recreation Centre</option>
              <option value="Other">Other</option>
            </select>
          </div>
        </div>

        <div class="file-upload">
          <label for="filename">Upload Your File:</label>
          <input type="file" id="filename" name="filename" accept="image/*,.pdf,.doc,.docx,.zip,.txt,.png">
        </div>

        <div class="buttons">
          <input type="reset">
          <input type="submit" id="b" style="background-color:#3498DB; color:white;">
          <div id="message">Form has been submitted successfully</div>
          <div id="loading" style="display:none;">Processing...</div>
        </div>

      </form>
      <!-- ===================== END FORM ===================== -->

    </div>
  </div>

</article>
</main>

<footer>
  <div class="hyperlinks">
    <div class="insta">
      <a href="https://www.instagram.com/3d.mushrooms/">
        <img src="MushImgs/ig.webp">
        <p>Instagram</p>
      </a>
    </div>

    <div class="tiktok">
      <a href="https://www.tiktok.com/@3d.mushrooms">
        <img src="MushImgs/4834215.png">
        <p>Tiktok</p>
      </a>
    </div>
  </div>
</footer>

<!-- ===================== JAVASCRIPT ===================== -->
<script>

/* ====================== COLLAPSIBLE BUTTONS ====================== */
document.querySelectorAll('.collapsible, .starts, .starts2, .st2, .nextbtnt3')
  .forEach(btn => {
    btn.addEventListener('click', e => {
      e.stopPropagation();
      btn.classList.toggle('active');

      const content = btn.nextElementSibling;
      if (content) {
        content.style.maxHeight = content.style.maxHeight ? null : content.scrollHeight + "px";
      }
    });
  });

document.addEventListener('click', () => {
  document.querySelectorAll('.collapsible.active, .starts.active, .starts2.active, .st2.active, .nextbtnt3.active')
    .forEach(btn => {
      btn.classList.remove('active');
      const content = btn.nextElementSibling;
      if (content) content.style.maxHeight = null;
    });
});

/* ====================== DATE MINIMUM ====================== */
const today = new Date().toISOString().split("T")[0];
document.getElementById('bdate').setAttribute('min', today);

/* ====================== FORM SUBMISSION ====================== */
const form = document.querySelector('form');
const fileInput = document.getElementById('filename');
const messageDiv = document.getElementById('message');
const loadingDiv = document.getElementById('loading');

form.addEventListener('submit', async e => {
  e.preventDefault();
  loadingDiv.style.display = 'block';

  const formData = new FormData(form);
  const dataObj = {};
  formData.forEach((v, k) => dataObj[k] = v);

  const file = fileInput.files[0];
  if (file) {
    const base64 = await new Promise(resolve => {
      const reader = new FileReader();
      reader.onload = event => resolve(event.target.result.split(',')[1]);
      reader.readAsDataURL(file);
    });
    dataObj.fileData = base64;
    dataObj.fileName = file.name;
    dataObj.fileType = file.type;
  }

  fetch(form.action, {
    method: "POST",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: JSON.stringify(dataObj)
  })
  .then(res => res.text())
  .then(() => {
    loadingDiv.style.display = 'none';
    messageDiv.textContent = "Form has been submitted successfully!";
    messageDiv.style.display = "block";

    form.reset();
    fileInput.value = "";
    setTimeout(() => messageDiv.style.display = "none", 3000);
  });
});

/* ====================== DISABLE GARAGE IN WINTER ====================== */
document.addEventListener("DOMContentLoaded", () => {
  const dateInput = document.getElementById("bdate");
  const areaSelect = document.getElementById("areaSelect");
  const garageOption = [...areaSelect.options].find(opt => opt.value === "Garage");

  dateInput.addEventListener("change", () => {
    if (!dateInput.value) return;

    const selectedDate = new Date(dateInput.value + "T00:00");
    const month = selectedDate.getMonth(); // 0 = Jan, 11 = Dec
    const isWinter = (month === 11 || month === 0 || month === 1);

    if (isWinter) {
      garageOption.disabled = true;
      garageOption.textContent = "Garages (Unavailable during Winter ❄️)";
      if (areaSelect.value === "Garage") {
        alert("Garage bookings are NOT available during Winter ❄️");
        areaSelect.value = "";
      }
    } else {
      garageOption.disabled = false;
      garageOption.textContent = "Garages";
    }
  });
});

</script>

</body>
</html>
